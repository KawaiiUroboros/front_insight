<label class="search-label" for="search">Search:</label>
<input nbInput [nbFilterInput]="dataSource" id="search" class="search-input" />

<table [nbTreeGrid]="dataSource" [nbSort]="dataSource" (sort)="updateSort($event)">
    <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="allColumns"></tr>
    <tr nbTreeGridRow *nbTreeGridRowDef="let row; columns: allColumns"></tr>

    <ng-container [nbTreeGridColumnDef]="customColumn">
        <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(customColumn)" *nbTreeGridHeaderCellDef>
            {{ customColumn }}
        </th>
        <td nbTreeGridCell *nbTreeGridCellDef="let row" style="align-items: center;">
            <nb-checkbox status="primary" [value]="checked" (change)="setCheckedStatus($event)"></nb-checkbox>
            {{ row.data[customColumn] }}
        </td>
    </ng-container>

    <ng-container [nbTreeGridColumnDef]="dateColumn">
        <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(dateColumn)" *nbTreeGridHeaderCellDef>
            {{ dateColumn }}
        </th>
        <td nbTreeGridCell *nbTreeGridCellDef="let row" style="align-items: center;">
            {{ row.data[dateColumn] || "-" }}
        </td>
    </ng-container>

    <ng-container [nbTreeGridColumnDef]="usersColumn">
        <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(usersColumn)" *nbTreeGridHeaderCellDef>
            {{ usersColumn }}
        </th>
        <td nbTreeGridCell *nbTreeGridCellDef="let row" style="align-items: center;">

            <nb-user class="user" [nbPopover]="templateRef" *ngFor="let user of row.data[usersColumn] " size="large" name="{{user}}" title="Engineer " onlyPicture>
                <ng-template #templateRef>
                    <span>Hello, Popover!</span>
                </ng-template>
            </nb-user>
            {{row.data[usersColumn] || '-'}}
        </td>
    </ng-container>

    <ng-container [nbTreeGridColumnDef]="defaultColumn ">
        <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(defaultColumn) " *nbTreeGridHeaderCellDef>
            {{ defaultColumn }}
        </th>
        <td nbTreeGridCell *nbTreeGridCellDef="let row " style="align-items: center; ">
            {{ row.data[defaultColumn] || "- " }}
        </td>
    </ng-container>

    <!-- <ng-container *ngFor="let column of defaultColumn; let index=i ndex " [nbTreeGridColumnDef]="column "
  [showOn]="getShowOn(index) ">
    <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(column) " *nbTreeGridHeaderCellDef>
      {{column}}
    </th>
    <td nbTreeGridCell *nbTreeGridCellDef="let row ">
      {{row.data[column] || '-'}}
    </td>
  </ng-container> -->
</table>