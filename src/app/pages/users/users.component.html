<div (window:resize)="onResize()" class="row" style="width: 100% ; box-shadow: -4px 4px 10px 0 rgba(25, 42, 70, 0.13)">

  <div [style]="(isSmallScreen || isMediumScreen || isTabletScreen || isXSmallScreen) && IsChangeUsersLayOut ? 'position: absolute;z-index: 1000;':''"
        *ngIf="!(isSmallScreen || isMediumScreen || isTabletScreen || isXSmallScreen) || IsChangeUsersLayOut"
    [class]="(isSmallScreen || isMediumScreen || isTabletScreen || isXSmallScreen) && IsChangeUsersLayOut ?'':'col-3 search'"
  >
    <nb-card class="search-card">
      <nb-card-header>
        <nb-form-field>
          <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
          <input
            id="searchUsers"
            (input)="filterUsers()"
            fieldSize="large"
            placeholder="Large"
            fullWidth
            type="text"
            nbInput
            shape="round"
            placeholder="Поиск"
          />
        </nb-form-field>
      </nb-card-header>
      <nb-card-body style="padding: 1rem 0rem">
        <nb-select
          size="tiny"
          nbPrefix
          icon="search-outline"
          fullWidth
          placeholder="Специальность"
          style="font-size: 1rem"
        >
          <nb-icon
            *ngIf="server.allusers"
            nbPrefix
            icon="search-outline"
            pack="eva"
          ></nb-icon>
          <nb-option
            *ngFor="let user of server.allusers; let index = index"
            value="index"
            style="font-size: 1rem"
            >{{ user.role }}</nb-option
          >
        </nb-select>

        <nb-accordion *ngIf="server.allusers && !users">
          <nb-accordion-item *ngFor="let user of server.allusers">
            <nb-accordion-item-header
              (click)="GetUserToRoute(user.uuid)"
              style="justify-content: space-between"
              [ngClass]="{
                activeUser:
                  user.uuid == MAINUSER ||
                  (server.allusers[0].uuid == user.uuid && firstTime)
              }"
            >
              <nb-user
                badgeText="▢"
                size="giant"
                badgeStatus="success"
                badgePosition="bottom right"
                [name]="user.full_name"
                [title]="user.role"
                [picture]="server.HOST + user.photo"
              >
              </nb-user>
              <div style="padding-right: 20px">
                <nb-icon status="warning" icon="star" pack="eva"></nb-icon>
              </div>
            </nb-accordion-item-header>
            <nb-accordion-item-body>
              <ul class="widget-timeline mb-0">
                <li class="timeline-items timeline-icon-primary active">
                  <div class="timeline-time">2 часа назад</div>
                  <h6 class="timeline-title">Добавлен файл</h6>
                  <div class="timeline-content">
                    <nb-icon
                      status="primary"
                      style="margin-right: 2px"
                      icon="file-text-outline"
                    ></nb-icon>
                    Order.pdf
                  </div>
                </li>
                <li class="timeline-items timeline-icon-primary active">
                  <div class="timeline-time">3 часа назад</div>
                  <h6 class="timeline-title">Удален файл</h6>
                  <div class="timeline-content">
                    <nb-icon
                      status="danger"
                      style="margin-right: 2px"
                      icon="file-text-outline"
                    ></nb-icon
                    >Invoices.pdf
                  </div>
                </li>
                <li class="timeline-items timeline-icon-primary active">
                  <div class="timeline-time">12 часов назад</div>
                  <h6 class="timeline-title">Отключена сеть</h6>
                  <div class="timeline-content">
                    <nb-icon
                      status="danger"
                      style="margin-right: 2px"
                      icon="flash-off-outline"
                    ></nb-icon>
                    корпоративный пк
                  </div>
                </li>
              </ul>
            </nb-accordion-item-body>
          </nb-accordion-item>
        </nb-accordion>

        <nb-accordion *ngIf="users">
          <nb-accordion-item *ngFor="let user of users">
            <nb-accordion-item-header
              (click)="GetUserToRoute(user.uuid)"
              style="justify-content: space-between"
              [ngClass]="{
                activeUser:
                  user.uuid == MAINUSER ||
                  (server.allusers[0].uuid == user.uuid && firstTime)
              }"
            >
              <nb-user
                badgeText="▢"
                size="giant"
                badgeStatus="success"
                badgePosition="bottom right"
                [name]="user.full_name"
                [title]="user.role"
                [picture]="server.HOST + user.photo"
              >
              </nb-user>
              <div style="padding-right: 20px">
                <nb-icon status="warning" icon="star" pack="eva"></nb-icon>
              </div>
            </nb-accordion-item-header>
            <nb-accordion-item-body>
              <ul class="widget-timeline mb-0">
                <li class="timeline-items timeline-icon-primary active">
                  <div class="timeline-time">2 часа назад</div>
                  <h6 class="timeline-title">Добавлен файл</h6>
                  <div class="timeline-content">
                    <nb-icon
                      status="primary"
                      style="margin-right: 2px"
                      icon="file-text-outline"
                    ></nb-icon>
                    Order.pdf
                  </div>
                </li>
                <li class="timeline-items timeline-icon-primary active">
                  <div class="timeline-time">3 часа назад</div>
                  <h6 class="timeline-title">Удален файл</h6>
                  <div class="timeline-content">
                    <nb-icon
                      status="danger"
                      style="margin-right: 2px"
                      icon="file-text-outline"
                    ></nb-icon
                    >Invoices.pdf
                  </div>
                </li>
                <li class="timeline-items timeline-icon-primary active">
                  <div class="timeline-time">12 часов назад</div>
                  <h6 class="timeline-title">Отключена сеть</h6>
                  <div class="timeline-content">
                    <nb-icon
                      status="danger"
                      style="margin-right: 2px"
                      icon="flash-off-outline"
                    ></nb-icon>
                    корпоративный пк
                  </div>
                </li>
              </ul>
            </nb-accordion-item-body>
          </nb-accordion-item>
        </nb-accordion>
      </nb-card-body>
      <nb-card-footer>
        <p class="styles_logoTitle__1Kvzk">
          <b>+ добавить избранных пользователей</b>
        </p>
      </nb-card-footer>
    </nb-card>
  </div>

  <div style="padding: 0rem !important;"
    [class]="isSmallScreen || isMediumScreen || isTabletScreen || isXSmallScreen ? 'col-12 content' : 'col-9 content'">
    <nb-card class="content-card">
      <nb-card-header fixed>
        <ng-template [ngIf]="!(isMediumScreen || isSmallScreen || isTabletScreen || isXSmallScreen)" [ngIfElse]="gridPhotoPhone">
          <div style="
              display: grid;
              grid-template-columns: repeat(8, 1fr);
              justify-items: center;"
          >
            <div *ngFor="let section of menu">
              <a
                style="text-decoration: none"
                [routerLink]="section.routerLink"
                (click)="sectionClick(section)"
              >
                <img
                  [src]="section.url"
                  [ngClass]="{ activeUser: section.active }"
                />
                <p>{{ section.title }}</p>
              </a>
            </div>
          </div>
        </ng-template>
        <ng-template #gridPhotoPhone>
          <div style="display: flex; justify-content: space-between">
            <div class="dropdown">
              <button
                class="btn btn-secondary dropdown-toggle"
                type="button"
                id="dropdownMenuButton"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                Действия
              </button>

              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a
                  style="text-decoration: none"
                  *ngFor="let section of menu"
                  class="dropdown-item"
                  [routerLink]="section.routerLink"
                  >{{ section.title }}</a
                >
              </div>
            </div>
            <button
              type="button"
              (click)="ChangeUsersLayOut()"
              class="btn btn-primary"
            >
              Пользователи
            </button>
          </div>
        </ng-template>
      </nb-card-header>
      <nb-card-body>
        <router-outlet></router-outlet>
      </nb-card-body>
    </nb-card>
  </div>
</div>

<!-- <div >
<mat-grid-list style="width: 100%;height: 100%;" cols="8" rowHeight="2:1">
  <mat-grid-tile
    [colspan]="2"
    [rowspan]="8">
    <nb-card class="search-card">
      <nb-card-header>
          <nb-form-field>
              <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
              <input id="searchUsers" (input)="filterUsers()" fieldSize="large" placeholder="Large" fullWidth type="text" nbInput shape="round" placeholder="Поиск" />
          </nb-form-field>
      </nb-card-header>
      <nb-card-body>
          <nb-select size="tiny" nbPrefix icon="search-outline" fullWidth placeholder="Специальность" style="font-size: 1rem">
              <nb-icon *ngIf="server.allusers" nbPrefix icon="search-outline" pack="eva"></nb-icon>
              <nb-option *ngFor="let user of server.allusers;let index = index " value="index" style="font-size: 1rem">{{user.role}}</nb-option>
          </nb-select>

          <nb-accordion *ngIf="server.allusers && !users">
              <nb-accordion-item *ngFor="let user of server.allusers">
                  <nb-accordion-item-header (click)="GetUserToRoute(user.uuid)" style="justify-content: space-between;" [ngClass]="{activeUser: user.uuid == MAINUSER || (server.allusers[0].uuid == user.uuid && firstTime)}">
                      <nb-user badgeText="▢" size="giant" badgeStatus="success" badgePosition="bottom right" [name]="user.full_name" [title]="user.role" [picture]=" server.HOST + user.photo">
                      </nb-user>
                      <div style="padding-right: 20px;">
                          <nb-icon status="warning" icon="star" pack="eva"></nb-icon>
                      </div>

                  </nb-accordion-item-header>
                  <nb-accordion-item-body>
                    <ul class="widget-timeline mb-0">
                      <li class="timeline-items timeline-icon-primary active">
                          <div class="timeline-time">2 часа назад</div>
                          <h6 class="timeline-title">Добавлен файл</h6>
                          <div class="timeline-content">
                              <nb-icon status="primary" style="margin-right: 2px;" icon="file-text-outline"></nb-icon> Order.pdf
                          </div>
                      </li>
                      <li class="timeline-items timeline-icon-primary active">
                          <div class="timeline-time">3 часа назад</div>
                          <h6 class="timeline-title">Удален файл</h6>
                          <div class="timeline-content">
                            <nb-icon status="danger" style="margin-right: 2px;" icon="file-text-outline"></nb-icon>Invoices.pdf
                          </div>
                      </li>
                      <li class="timeline-items timeline-icon-primary active">
                        <div class="timeline-time">12 часов назад</div>
                        <h6 class="timeline-title">Отключена сеть</h6>
                        <div class="timeline-content">
                          <nb-icon status="danger"style="margin-right: 2px;" icon="flash-off-outline"></nb-icon> корпоративный пк
                        </div>
                    </li>
                  </ul>
                  </nb-accordion-item-body>
              </nb-accordion-item>
          </nb-accordion>

          <nb-accordion *ngIf="users">
              <nb-accordion-item *ngFor="let user of users">
                  <nb-accordion-item-header (click)="GetUserToRoute(user.uuid)" style="justify-content: space-between;" [ngClass]="{activeUser: user.uuid == MAINUSER || (server.allusers[0].uuid == user.uuid && firstTime)}">
                      <nb-user badgeText="▢" size="giant" badgeStatus="success" badgePosition="bottom right" [name]="user.full_name" [title]="user.role" [picture]=" server.HOST + user.photo">
                      </nb-user>
                      <div style="padding-right: 20px;">
                          <nb-icon status="warning" icon="star" pack="eva"></nb-icon>
                      </div>

                  </nb-accordion-item-header>
                  <nb-accordion-item-body>
                    <ul class="widget-timeline mb-0">
                      <li class="timeline-items timeline-icon-primary active">
                          <div class="timeline-time">2 часа назад</div>
                          <h6 class="timeline-title">Добавлен файл</h6>
                          <div class="timeline-content">
                              <nb-icon status="primary" style="margin-right: 2px;" icon="file-text-outline"></nb-icon> Order.pdf
                          </div>
                      </li>
                      <li class="timeline-items timeline-icon-primary active">
                          <div class="timeline-time">3 часа назад</div>
                          <h6 class="timeline-title">Удален файл</h6>
                          <div class="timeline-content">
                            <nb-icon status="danger" style="margin-right: 2px;" icon="file-text-outline"></nb-icon>Invoices.pdf
                          </div>
                      </li>
                      <li class="timeline-items timeline-icon-primary active">
                        <div class="timeline-time">12 часов назад</div>
                        <h6 class="timeline-title">Отключена сеть</h6>
                        <div class="timeline-content">
                          <nb-icon status="danger"style="margin-right: 2px;" icon="flash-off-outline"></nb-icon> корпоративный пк
                        </div>
                    </li>
                  </ul>
                  </nb-accordion-item-body>
              </nb-accordion-item>
          </nb-accordion>
      </nb-card-body>
      <nb-card-footer>
          <p class="styles_logoTitle__1Kvzk">
              <b>+ добавить избранных пользователей</b>
          </p>
      </nb-card-footer>
  </nb-card>
  </mat-grid-tile>
  <mat-grid-tile
  [colspan]="6"
  [rowspan]="8">
    <nb-card class="content-card">
      <nb-card-header fixed>
          <div style="display: grid; grid-template-columns: repeat(8, 1fr); justify-items: center;">
              <div *ngFor="let section of menu">
                  <a style="text-decoration: none;" [routerLink]="section.routerLink" (click)='sectionClick(section)'>
                      <img [src]="section.url" [ngClass]="{activeUser: section.active}" />
                      <p>{{section.title}}</p>
                  </a>
              </div>
          </div>
      </nb-card-header>
      <nb-card-body>
          <router-outlet></router-outlet>
      </nb-card-body>
  </nb-card>
  </mat-grid-tile>
</mat-grid-list>
</div> -->
